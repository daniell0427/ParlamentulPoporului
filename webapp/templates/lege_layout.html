{% extends "layout.html" %}


{% block head %}
    <link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='lege_layout.css') }}" >
{% endblock head %}

{% block content %}

    <div id="all">
        <div id="title">
            <h1>{{titlu}}</h1>
        </div>

        <div id="main">
            <div id="submain">
                <div id="elementeleLegii">

                    <div id="text">
                        <p>{{descriere}} Lorem ipsum dolor sit jiv vijsegbi ywfwoign voignv kejapfn vamet consectetur adipisicing elit. Aspernatur modi, esse libero deleniti quasi aut placeat laborum explicabo. Veniam, beatae? Lorem ipsum dolor sit amet consectetur adipisicing elit. Exercitationem, cum.</p>
                    </div>
                    
                    <div id="data-user"> 

                        <div id="data">
                            <p>{{data}}</p>
                        </div>

                        <div id="username">
                            <a href=""><p>@{{username}}</p></a>
                        </div>

                    </div>

                </div>
            </div>
            <div id="voturi">

                <div id="pcn">
                    <strong>Voturi:</strong>
                    <strong id="pro">Pro:  <span id="proNumber">4{{pro}}</span></strong>
                    <strong id="contra">Contra:  <span id="contraNumber">2{{contra}}</span></strong>
                    <strong id="neutre">Neutre:  <span id="neutruNumber">3{{neutru}}</span></strong>
                </div>    
                
                <div class="pieChart"></div>

            </div>   

        </div>

    
        <button class="button1" id="button1">Voteaza</button>

    </div>

    <!--Modal section!-->

    <div class="modal">
        <div class="modal-content">
            <div class="close">+</div>
            <h1>Voteaza acum</h1>
            <hr style="height: 1px; margin-left: -10px; margin-top: -5px;">
            <form action="">
                <label for="phone">
                    Va rog introduceti numarul dvs de telefon:
                </label><br>
                <input type="tel" name="phone" id="phone" pattern="[0-9]{9}" required><br> 
                <button type="submit" class="button2" id="button2">Trimite</button> 
            </form>
        </div>
    </div>

    <script>
        document.getElementById('button1').addEventListener('click', function() {
            document.querySelector('.modal').style.display = 'flex';
        });

        document.querySelector('.close').addEventListener('click', function() {
            document.querySelector('.modal').style.display = 'none';
        });

        //pentru pie chart
        let pro = parseInt(document.getElementById("proNumber").textContent);
        let contra = parseInt(document.getElementById("contraNumber").textContent);
        let neutru = parseInt(document.getElementById("neutruNumber").textContent);

        let sum = pro + contra + neutru;

        let procentajPro = (100 * pro)/sum;

        let procentajContra = (100 * contra)/sum;

        let procentajNeutru = (100 * neutru)/sum;

        document.documentElement.style.setProperty("--procentajPro", procentajPro);
        document.documentElement.style.setProperty("--procentajContra", procentajContra);
        document.documentElement.style.setProperty("--procentajNeutru", procentajNeutru);

    </script>

{% endblock content %}